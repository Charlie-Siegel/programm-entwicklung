<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Projekt-Mindmap (5GL-Sammlung)</title>
  <style>
    body { margin:0; background: #f7fafc; font-family:sans-serif;}
    #map { width: 100vw; height: 90vh; border: 1px solid #bbb; }
    #toolbar { padding: 10px; background: #eee; }
    button { margin-right: 10px; }
  </style>
  <!-- MindElixir CDN -->
  <script src="https://cdn.jsdelivr.net/npm/mind-elixir-core/dist/mind-elixir.js"></script>
</head>
<body>
  <div id="toolbar">
    <button onclick="saveMap()">üóÑÔ∏è Mindmap speichern</button>
    <button onclick="loadMap()">üìÇ Mindmap laden</button>
    <input type="file" id="fileInput" style="display:none" accept=".json" />
  </div>
  <div id="map"></div>
  <script>
    // Initiales Mindmap-Datenmodell (anpassbar!)
    let initialData = {
      "nodeData": {
        "id": "root",
        "topic": "5GL-Baustein-Sammlung",
        "root": true,
        "children": [
          { "id": "1", "topic": "Bausteinverwaltung", "children": [] },
          { "id": "2", "topic": "Klassendesigner", "children": [] },
          { "id": "3", "topic": "Logbuch", "children": [] },
          { "id": "4", "topic": "Hilfedokumentation", "children": [] },
          { "id": "5", "topic": "Vorschau & Simulation", "children": [] },
          { "id": "6", "topic": "Dateiverwaltung", "children": [] },
          { "id": "7", "topic": "User & Rollen", "children": [] },
          { "id": "8", "topic": "Projektverwaltung/Doku", "children": [] }
        ]
      }
    };

    // MindElixir initialisieren
    let mind = new MindElixir({
      el: '#map',
      direction: MindElixir.SIDE, // oder MindElixir.RIGHT
      draggable: true,
      contextMenu: true,
      toolBar: true,
      nodeMenu: true,
      keypress: true,
      locale: 'de'
    });

    mind.init(initialData);

    // Mindmap speichern (JSON Download)
    function saveMap() {
      const data = JSON.stringify(mind.getData(), null, 2);
      const blob = new Blob([data], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = "projekt_mindmap.json";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    // Mindmap laden (JSON Upload)
    document.getElementById("fileInput").addEventListener("change", function(e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(evt) {
        const data = JSON.parse(evt.target.result);
        mind.init(data);
      };
      reader.readAsText(file);
    });

    function loadMap() {
      document.getElementById("fileInput").click();
    }
  </script>
</body>
</html>
